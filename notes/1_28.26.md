## gdal stuff
- link: [https://gdal.org/en/stable/](https://gdal.org/en/stable/)
- `gdalinfo` `[filename]` to learn about file
- WKT representation = well-known-text
    - One standardized coordinate reference system for GeoTIFF
    - Have diferent bands (B4, B3, B2) that correspond to whatever different bands
- Raster histograms are important to see how underlying data is distributed
- Command line tool called ogr (`ogrinfo`) where you can interact with files like gdal

## mapshaper
- He loaded vector data here
- Has its own programming language

## First In-Class Example
- Raster file w/ "greenness" (mapped between 0-1) overlayed over vector file with NYC neighborhoods
- How can we rank neighborhoods by greenness?
    1. Map each pixel to a neighborhood
        - Make sure coordinate systems match (say they're both UTM x-y cartesian planes)
        - Figure out which raster data point corresponds to to which neighborhood
        - Combination operation is called a "clip" or a "warp" - given a geometry/raster file, if you ask to clip, it will do this map for us (find pixels that intersect with geometry, throw out the rest)
        - Thus, we clip the raster to the geometry which `gdal` will do
    2. Calculate green metric
        - Sum pixels / count of pixels (same as normalizing by area)
        - Could also take the median to mitigate outliers
        - Could also take like 75th percentile of landmass covered by green as well
        - There really is no one way/right answer to calculate the metric, it's all situational
    3. Apply this mapping to all neighborhoods
        - Naive way is to loop through every neighborhood, do steps 1&2, and sort by metric in descending order
- This all depends on time of year, sensor used, time of day, etc.

## Coordinate Reference Systems (CRS)
- Latitude/Longitude = as close as we can get to global communication on Earth
    - Is formally called WGS84 (World Geodedic System 1984)
    - WGS84 tells us both units and tells us we're using the "datum" model under the hood so we can look things up on the surface on the earth
    - Values are in degrees (measure of rotation from the center of the Earth, not length)
    - Can also represent as EPSG4326
    - Can't really calculate distance using lat/long on a 2D map as the coordinate vales on a sphere aren't 1:1 with a plane (distances in lat/long degrees are NOT the same everywhere)
- CRS = a standardized way to describe locations on Earth
    - A framework that defines locations in space using numbers
    - Basically tells us the "where"
    - Is required for modern mapping (GIS software, GPS, etc.)
- Earth is not perfectly spherical
    - Technical term is oblispheroid
    - Flattened at poles and bulging at equator (like a little fat)
- Datum = mathematical model that defines the shape & size of Earth, along with its origin point and orientation of CRS
    - Datum of the earth is WGS84
    - Datum of North America is NAD83 as it is more locally specific to North America compared to WGS84
    - In practice, we don't have to think much about this as most of our data is going to be in NAD83 or WGS84
    - WGS84 and NAD83 are both ellipsoidal datums
- Use Geodesic calculations for distance
    - These are computationally intensive


## Distortion 
- Every projection must distort at least
    - Angle (shape)
    - Area
    - Distance

- Detailed recipes for specifying arbitray CRS'
    - WKT = Wellkan text
    - Proj string (proj4) = tells you projection (mercader) and datum (WGS84)
    - EPSG codes = European Petroleum Survey Group
        - Can think of this as a lookup to a proj string or a well-known text representation (short hand)
        - EPSG:5070 = USA Albers
        - EPSG:3857 = Web Mercator
        - EPSG:4326 = WGS84 (lat/long)
    - All three of these are ways of representing CRS'

## Universal Transverse Mercator (UTM)
- Not a single projection, but a global projection system
- If working in WGS84, coordinates are in (long, lat) format
- Is there a better way to represet "everywhere in the world" where you can get away with less distortion than anything else?
- For UTM, imagine a horizontal cylindar going through the globe, and splitting lines of longitude into zones, and then unwrap the cross section (choose width)
    - Then keep rotating cylinders, aligning with cross section
    - End up with something in 2D that splits the world into strips of longitude, each of which has its own central meridian
    - Thus this minimizes distortion within each zone
- Have resonable distortion properties within each "slice" of Earth
- Divise the world into 6 degree slices of longitude, with hemispheres split
- For Northern Hemisphere, code will be: EPSG:326{zone}
    - For NYC, it's EPSG:32618
- For Southern Hemisphere, code will be: EPSG:327{zone}
- Units are in meters
